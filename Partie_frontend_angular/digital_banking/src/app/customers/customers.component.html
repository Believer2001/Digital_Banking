<div class="container mt-2">
  <ng-container *ngIf="customers| async as listcustomers; else failureOrLoading">


    <div class="card"   >

      <div class="card-header" > Customers </div>

      <div *ngIf="searchFormGroup">
        <form [formGroup]="searchFormGroup" (ngSubmit)="handleSearchCustomer()">

          <div class="input-group">
            <label class="input-group-text">
              keyword:
            </label>
            <input type="text" formControlName="keyword" class="form-control">
            <button class="btn btn-info">
              <i class="bi bi-search" >

              </i>
              </button>
          </div>
        </form>
      </div>
      <div class="card-body" >
        <div class="table">
          <thead>
          <tr>    <th>  ID    </th>    <th>      NOM    </th>    <th>  Email    </th>  </tr>
          </thead>
          <tbody>

          <tr *ngFor="let  p of customers|async">
            <td>{{p.id}}</td>
            <td>{{p.nom}}</td>
            <td>{{p.email}}</td>

            <td>
              <button (click)="handleUpdateCustomer(p)" class="btn btn-outline-info">
                <i class="bi bi-pencil"></i>
              </button>
            </td>


            <td>
              <button (click)="handleDeleteCustomer(p)" class="btn btn-danger">
                <i class="bi bi-trash"></i>
              </button>
            </td>

          </tr>


          </tbody>
        </div>


      </div>

    </div>

  </ng-container>

  <ng-template #failureOrLoading >

    <ng-container *ngIf="errMessage ;else loading ">

      <div class="text-danger">
        {{errMessage}}

      </div>
    </ng-container>

   <ng-template #loading>
     <div>
       loading ....;
     </div>
   </ng-template>


  </ng-template>



</div>
